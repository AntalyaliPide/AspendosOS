name: Aspendos ISO Tam Insa
on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Kodlari Cek
        uses: actions/checkout@v4

      - name: Insa Araclarini Kur
        run: |
          sudo apt-get update
          sudo apt-get install -y live-build

      - name: ISOyu Gercekten Olustur
        run: |
          mkdir build && cd build
          # Bu komut Debian tabanli tam bir ISO yapilandirmasi hazirlar
          lb config --binary-images iso-hybrid --architectures amd64 \
                    --distribution bookworm --debian-installer live \
                    --archive-areas "main contrib non-free non-free-firmware"
          
          # GNOME ve temel ihtiyaclari ekliyoruz
          mkdir -p config/package-lists
          echo "gnome-core network-manager firefox-esr" > config/package-lists/aspendos.list.chroot
          
          # Pisirme islemi basliyor (Bu biraz uzun surer)
          sudo lb build

      - name: ISOyu Yukle
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: Aspendos-Gercer-ISO
          path: build/*.iso
